<Window x:Class="PicPaste.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PicPaste 设置" 
        Height="450" 
        Width="800"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize"
        Background="#F0F0F0"
        Icon="123.png">

    <Border Background="White" Margin="15" CornerRadius="10">
        <Border.Effect>
            <DropShadowEffect ShadowDepth="3" BlurRadius="10" Opacity="0.15" Color="Gray"/>
        </Border.Effect>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- 左侧：标题和基本信息 -->
            <Border Background="#0078D4" CornerRadius="10,0,0,10">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="20">
                    <Image Source="123.png" Width="80" Height="80" Margin="0,0,0,15"/>
                    <TextBlock Text="PicPaste" FontSize="24" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                    <TextBlock Text="智能剪贴板图片处理工具" FontSize="12" Foreground="#E0E0E0" HorizontalAlignment="Center" Margin="0,5,0,0" TextWrapping="Wrap" TextAlignment="Center"/>
                    <Separator Background="#5599DD" Margin="0,20,0,15"/>
                    <TextBlock Text="开发者：潇洒公子" FontSize="11" Foreground="#CCCCCC" HorizontalAlignment="Center"/>
                    <TextBlock Text="版本 1.0.0" FontSize="11" Foreground="#CCCCCC" HorizontalAlignment="Center" Margin="0,3,0,0"/>
                </StackPanel>
            </Border>

            <!-- 右侧：设置内容 -->
            <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" Margin="20,15,15,15">
                <StackPanel>
                    <!-- 保存路径设置 -->
                    <TextBlock Text="保存路径" Style="{StaticResource SectionHeader}" Margin="0,0,0,5"/>
                    <TextBlock Text="截图保存的文件夹位置" Style="{StaticResource DescriptionText}"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="TxtSavePath" 
                                 Style="{StaticResource ModernTextBox}" 
                                 IsReadOnly="True"
                                 Background="#F5F5F5"/>
                        <Button Grid.Column="1" 
                                Content="浏览..." 
                                Style="{StaticResource ModernButton}"
                                Margin="10,0,0,0"
                                Padding="12,6"
                                Click="OnBrowsePath"/>
                    </Grid>

                    <!-- 处理模式 -->
                    <TextBlock Text="处理模式" Style="{StaticResource SectionHeader}"/>
                    <TextBlock Text="选择何时将剪贴板中的图片保存为文件" Style="{StaticResource DescriptionText}"/>
                    <StackPanel Margin="0,5,0,0">
                        <RadioButton x:Name="RbProcessOnPaste" 
                                     Content="仅在终端/命令行粘贴时处理（推荐）" 
                                     GroupName="ProcessMode"
                                     FontSize="12"
                                     Margin="0,3"/>
                        <TextBlock Text="截图后不会立即生成文件，只有在终端中按 Ctrl+V 粘贴时才保存" 
                                   FontSize="10" 
                                   Foreground="#888" 
                                   Margin="20,0,0,8"/>

                        <RadioButton x:Name="RbProcessImmediate" 
                                     Content="截图后立即处理" 
                                     GroupName="ProcessMode"
                                     FontSize="12"
                                     Margin="0,3"/>
                        <TextBlock Text="每次截图后立即保存为文件并替换剪贴板内容" 
                                   FontSize="10" 
                                   Foreground="#888" 
                                   Margin="20,0,0,0"/>
                    </StackPanel>

                    <!-- 启动设置 -->
                    <TextBlock Text="启动设置" Style="{StaticResource SectionHeader}"/>
                    <CheckBox x:Name="CbAutoStart" 
                              Content="开机自动启动" 
                              Style="{StaticResource ModernCheckBox}"
                              FontSize="12"
                              ToolTip="Windows 启动时自动运行 PicPaste"/>

                    <!-- 缓存管理设置 -->
                    <TextBlock Text="缓存管理" Style="{StaticResource SectionHeader}"/>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="140"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="70"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="最大文件数量" VerticalAlignment="Center" FontSize="12"/>
                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBox x:Name="TxtMaxFiles"
                                     Width="80"
                                     Height="26"
                                     FontSize="12"
                                     VerticalContentAlignment="Center"
                                     HorizontalContentAlignment="Center"
                                     BorderBrush="#CCCCCC"
                                     BorderThickness="1"
                                     Padding="5,0"/>
                            <CheckBox x:Name="CbUnlimitedFiles"
                                      Content="无限制"
                                      Margin="15,0,0,0"
                                      FontSize="12"
                                      VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="140"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="70"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="保留时长（小时）" VerticalAlignment="Center" FontSize="12"/>
                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBox x:Name="TxtRetention"
                                     Width="80"
                                     Height="26"
                                     FontSize="12"
                                     VerticalContentAlignment="Center"
                                     HorizontalContentAlignment="Center"
                                     BorderBrush="#CCCCCC"
                                     BorderThickness="1"
                                     Padding="5,0"/>
                            <CheckBox x:Name="CbUnlimitedRetention"
                                      Content="永久保留"
                                      Margin="15,0,0,0"
                                      FontSize="12"
                                      VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="140"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="70"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="清理间隔（分钟）" VerticalAlignment="Center" FontSize="12"/>
                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBox x:Name="TxtCleanupInterval"
                                     Width="80"
                                     Height="26"
                                     FontSize="12"
                                     VerticalContentAlignment="Center"
                                     HorizontalContentAlignment="Center"
                                     BorderBrush="#CCCCCC"
                                     BorderThickness="1"
                                     Padding="5,0"/>
                            <CheckBox x:Name="CbNoAutoCleanup"
                                      Content="不自动清理"
                                      Margin="15,0,0,0"
                                      FontSize="12"
                                      VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>

                    <CheckBox x:Name="CbCleanupOnExit" 
                              Content="退出时清理所有截图文件" 
                              Style="{StaticResource ModernCheckBox}"
                              FontSize="12"
                              Margin="0,8,0,0"/>

                    <CheckBox x:Name="CbCleanupOnShutdown" 
                              Content="关机时清理所有截图文件" 
                              Style="{StaticResource ModernCheckBox}"
                              FontSize="12"
                              Margin="0,5,0,0"/>

                    <!-- 更新设置 -->
                    <TextBlock Text="更新设置" Style="{StaticResource SectionHeader}"/>
                    <CheckBox x:Name="CbAutoCheckUpdate"
                              Content="启动时自动检查更新"
                              Style="{StaticResource ModernCheckBox}"
                              FontSize="12"
                              Margin="0,5,0,10"/>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="140"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="更新源" VerticalAlignment="Center" FontSize="12"/>
                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                            <RadioButton x:Name="RbUpdateGitHub" Content="GitHub" GroupName="UpdateSource" Margin="0,0,15,0" FontSize="12"/>
                            <RadioButton x:Name="RbUpdateGitee" Content="Gitee（国内推荐）" GroupName="UpdateSource" FontSize="12"/>
                        </StackPanel>
                    </Grid>
                    <TextBlock Text="提示：Gitee 服务器在国内，没有代理的情况下下载速度更快" 
                               FontSize="11" Foreground="#888" Margin="0,0,0,15"/>

                    <Button x:Name="BtnCheckUpdateNow" 
                            Content="立即检查更新" 
                            Style="{StaticResource ModernButton}"
                            Padding="15,6"
                            HorizontalAlignment="Left"
                            Click="OnCheckUpdateNow"
                            Margin="0,0,0,10"/>

                    <!-- 其他设置 -->
                    <TextBlock Text="其他设置" Style="{StaticResource SectionHeader}"/>
                    <CheckBox x:Name="CbShowNotifications"
                              Content="显示托盘通知"
                              Style="{StaticResource ModernCheckBox}"
                              FontSize="12"
                              Margin="0,5,0,10"/>

                    <!-- 日志显示区域 -->
                    <TextBlock Text="运行日志" Style="{StaticResource SectionHeader}" Margin="0,10,0,5"/>
                    <Border BorderBrush="#CCCCCC" BorderThickness="1" Background="#FAFAFA" Height="150">
                        <ScrollViewer x:Name="LogScrollViewer" VerticalScrollBarVisibility="Auto">
                            <TextBox x:Name="TxtLogContent"
                                     IsReadOnly="True"
                                     TextWrapping="Wrap"
                                     FontSize="10"
                                     FontFamily="Consolas"
                                     Background="Transparent"
                                     BorderThickness="0"
                                     Padding="5"/>
                        </ScrollViewer>
                    </Border>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,5,0,0">
                        <Button Content="刷新"
                                Style="{StaticResource ModernButton}"
                                Padding="12,4"
                                FontSize="11"
                                Click="OnRefreshLog"/>
                        <Button Content="清空日志"
                                Style="{StaticResource ModernButton}"
                                Padding="12,4"
                                FontSize="11"
                                Margin="10,0,0,0"
                                Click="OnClearLog"/>
                    </StackPanel>

                    <!-- 按钮 -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,25,0,0">
                        <Button Content="恢复默认" 
                                Style="{StaticResource ModernButton}"
                                Background="#666666"
                                Padding="12,6"
                                Click="OnResetDefaults"
                                Margin="0,0,10,0"/>
                        <Button Content="取消" 
                                Style="{StaticResource ModernButton}"
                                Background="#999999"
                                Padding="12,6"
                                Click="OnCancel"
                                Margin="0,0,10,0"/>
                        <Button Content="保存" 
                                Style="{StaticResource ModernButton}"
                                Click="OnSave"
                                Padding="20,6"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>
